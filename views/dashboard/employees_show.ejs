<%- include('../includes/header'); -%>

    <div class="container py-4">

        <a href="/admin/employees">Return to employees</a>
        <div class="row mb-3 align-items-center">
            <div class="col-md-6">
                <h1 class="m-0"><%= employee.name %></h1>
            </div>
            <div class="col-md-6 text-end">
                <form action="/admin/employees/delete/<%= employee.id %>" method="post">
                    <input type="hidden" name="_csrf" value="<%= csrfToken %>">  
                    <button type="submit" class="btn btn-danger">Delete</button>
                </form>
                
                <div class="text-muted">
                    <small>Permanently deletes all attendance records.</small>
                </div>
                
            </div>
        </div>

        <div class="card mb-3">
            <div class="card-body">
                <form action="/admin/employees" method="post">
                    <input type="hidden" name="_csrf" value="<%= csrfToken %>">        
                    <div class="mb-3">
                        <label for="name" class="form-label">Employee Name</label>
                        <input type="text" name="name" class="form-control" id="name" placeholder="John Doe"
                            required value="<%= employee.name %>">
                    </div>
                    <div class="mb-3">
                        <label for="email" class="form-label">Email address</label>
                        <input type="email" name="email" class="form-control" id="email"
                            placeholder="jonh@email.com" required value="<%= employee.email %>">
                    </div>
    
                    <div class="mb-3">
                        <label for="joinedAt" class="form-label">Joined At</label>
                        <input type="date" name="joinedAt" class="form-control" id="joinedAt" 
                        value="<%= employee.joinedAt %>">
                    </div>

                    <button type="submit" class="btn btn-primary">Update</button>
                </form>
            </div>
        </div>

        <div class="text-muted small text-uppercase mb-1">Attendance History</div>
        <div class="card">
            <div class="card-body">
                <ul>
                    <% employee.Attendances.forEach(function(attendance) { %>
                      <li>
                        <%= attendance.punchedAt.toLocaleString() %>
                      </li>
                      <% }); %>
                  </ul>
            </div>
        </div>

    </div>
<%- include('../includes/footer'); -%>